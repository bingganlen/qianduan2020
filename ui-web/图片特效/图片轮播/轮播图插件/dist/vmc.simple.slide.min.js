/**
 * vmc.simple.slide v1.0.1
 * 维米客响应式JQuery图片轮播插件
 * 维米客网页工作室 Vomoc Studio
 * www.vomoc.com
 * vomoc@qq.com
 * 2017/03/14
 **/
;(function(b,d){var c="vomoc";b.fn.vmcSimpleSlide=function(f){var g=b.type(f)==="string",e=[].slice.call(arguments,1);if(!this.length){return}return this.each(function(){var i=b(this),h=i.data(c);if(g&&f.charAt(0)!=="_"&&h){a.prototype[f]&&a.prototype[f].apply(h,e)}else{if(!g&&!h){h=new a(i,f);h._init();i.data(c,h)}}})};var a=function(e,g){var f=this;f.options=b.extend({},f.options,g);f.original=e.children().first();f.parent=e;f.elem=null;f.items=[];f.summaries=[];f.animateStatus=false;f.timer=null;f.index=0;f.width=0;f.height=0;f.auto=f.options.auto;f.tinyIE=navigator.appName=="Microsoft Internet Explorer"&&parseInt(navigator.appVersion.split(";")[1].replace(/[ ]/g,"").replace("MSIE",""))<9};a.prototype.options={data:[],width:"auto",height:"auto",minWidth:0,minHeight:0,auto:true,autoPlayDirection:"right",duration:4000,speed:600,showSideButton:true,showBottomButton:true,showSummary:"auto",summaryIsHtml:false,hoverStop:true};a.prototype._init=function(){var j=this,o=j.original,f=j.options;j.elem=b("<div>").addClass("vmc-simple-slide-wrap");var g=b("<ul>").addClass("vmc-simple-slide");o.children().each(function(){var i=b(this),t=i.find("img").attr("src");var r=b("<li>").addClass("vmc-simple-slide-item").css({backgroundImage:"url("+t+")"});if(j.tinyIE){var s=b("<img>").addClass("vmc-simple-slide-img").attr("src",t);r.append(s)}j.items.push(r);j.summaries.push(i.attr("title"))});var q=b("<div>").addClass("vmc-simple-slide-page-buttons").toggle(f.showSideButton);var n=b("<div>").addClass("vmc-simple-slide-page-button next").on("click",function(){j._next()});var k=b("<div>").addClass("vmc-simple-slide-page-button prev").on("click",function(){j._prev()});q.append(n).append(k);var p=b("<ul>").addClass("vmc-simple-slide-handle-buttons").toggle(f.showBottomButton).on("click","li",function(){j._goto(b(this).index())});for(var h=0;h<j.items.length;h++){var e=b("<li>").addClass("vmc-simple-slide-handle-button");p.append(e)}var l=b("<div>").addClass("vmc-simple-slide-summary-mask");var m=b("<div>").addClass("vmc-simple-slide-summary");g.append(j.items[j.index]);j.elem.append(g);j.elem.append(p);j.elem.append(q);j.elem.append(l);j.elem.append(m);o.replaceWith(j.elem);j._setSize();j._setHandleButtons(j.index);j._setSummary(j.index);j._auto();b(window).on("resize",function(){j._setSize();g.stop(true,true)});j.elem.on("mouseenter",function(){q.children().addClass("hover");if(f.hoverStop){clearTimeout(j.timer);j.auto=false}}).on("mouseleave",function(){q.children().removeClass("hover");if(f.hoverStop){j.auto=j.options.auto;j._auto()}})};a.prototype._next=function(){var f=this;var e=f.index+1;e=e>=f.items.length?0:e;f._play(e,"right")};a.prototype._prev=function(){var f=this;var e=f.index-1;e=e<0?f.items.length-1:e;f._play(e,"left")};a.prototype._goto=function(e){var f=this;e=e>f.items.length-1?f.items.length-1:e;e=e<0?0:e;if(e>f.index){f._play(e,"right")}else{if(e<f.index){f._play(e,"left")}}};a.prototype._play=function(e,i){var f=this,h=f.elem.children(".vmc-simple-slide"),g=f.options;clearTimeout(f.timer);if(!f.animateStatus&&f.items.length>1){f.animateStatus=true;f._setHandleButtons(e);f._setSummary(e);if(i==="left"){h.stop(true,false).prepend(f.items[e]).css({marginLeft:-f.width}).animate({marginLeft:0},g.speed,function(){f.items[f.index].remove();f.index=e;f.animateStatus=false;f._auto()})}else{h.stop(true,false).append(f.items[e]).animate({marginLeft:-f.width},g.speed,function(){h.css({marginLeft:0});f.items[f.index].remove();f.index=e;f.animateStatus=false;f._auto()})}}};a.prototype._auto=function(){var e=this,f=e.options;if(e.auto){e.timer=setTimeout(function(){if(f.autoPlayDirection==="right"){e._next()}else{e._prev()}},f.duration)}};a.prototype._setSize=function(){var f=this,g=f.options;f.width=g.width==="auto"?f.parent.width():g.width;f.height=g.height==="auto"?f.parent.height():g.height;f.width=f.width<g.minWidth?g.minWidth:f.width;f.height=f.height<g.minHeight?g.minHeight:f.height;f.elem.height(f.height).width(f.width);for(var e=0;e<f.items.length;e++){f.items[e].height(f.height).width(f.width)}};a.prototype._setHandleButtons=function(e){this.elem.find(".vmc-simple-slide-handle-buttons").children().removeClass("active").eq(e).addClass("active")};a.prototype._setSummary=function(h){var g=this.summaries[h]||"";var f=b.type(this.options.showSummary)==="boolean"?this.options.showSummary:!!g;var e=this.elem.children(".vmc-simple-slide-summary");if(this.options.summaryIsHtml){e.html(g)}else{e.html(b("<div>").addClass("text").text(g))}this.elem.children(".vmc-simple-slide-summary-mask,.vmc-simple-slide-summary").toggle(f)};a.prototype.reSize=function(){this._setSize()}})(jQuery);